## JWT(Json Web Token)의 장점은 무엇인가요?

### JWT란 무엇인가

JWT는 웹에서 **사용자를 인증하고 권한을 부여**하는데 사용되는 JSON 형식의 토큰입니다. 
JWT는 주로 `AccessToken`과 `RefreshToken` 두 가지 형태로 발급됩니다.
`AccessToken`은 사용자가 인가되었음을 증명하는데 사용되고 `RefreshToken`은 만료된 AccessToken을 갱신하는데 사용됩니다.

AccessToken은 탈취될 경우 인가를 위조할 수 있기에 유효시간을 짧게 설정하고 RefreshToken을 사용하여 지속적으로 AccessToken을 갱신하는 방식을 주로 사용합니다.

JWT를 사용하는 서비스는 로그인 시 쿠키에 AccessToken과 RefreshToken을 함께 전달합니다.
웹에서 AccessToken을 메모리 또는 클리어언트 저장소에 보관하여 사용하고 AccessToken이 만료되었거나 유효하지 않는 경우 RefreshToken으로 갱신합니다.
이때, RefreshToken이 유효하지 않다면 사용자를 로그아웃시킵니다.

### JWT 장점

인가에 대한 정보를 프론트엔드로 전가하여 백엔드의 부담을 줄이는 **Stateless 서버** 형태를 가집니다.
인증에 필요한 모든 정보를 토큰에 저장하고 있기에 서버는 클라이언트의 상태(세션)를 유지할 필요가 없습니다. 서버는 부담을 줄일 수 있고 토큰의 유효성만 검증하면 됩니다.

또한, 세션을 통해 인증된 사용자를 전부 관리하면 **많은 리소스**를 사용해야합니다. 사용자가 많은 서비스라면 로드 밸런서를 통해 트래픽을 분산하여 관리합니다.
예를들어 A로드 밸런서를 통해 접속한 사용자가 있고 A서버가 과부화되어 B서버로 연결이 전환되면 B서버에는 사용자의 인증 데이터가 없으므로 데이터를 받을 수 없거나 로그아웃되는 문제가 발생합니다.
JWT는 토큰에 인증 정보를 포함하고 있어 이런 상황에 문제가 발생하지 않습니다.

### JWT 단점

JWT는 인증에 필요한 정보를 Payload에 담습니다. 많은 정보를 담을수록 토큰의 크기가 커지고 통신마다 AccessToken을 필요로 하게되면 세션을 유지하는 것보다 많은 비용을 처리해야할 수 있습니다.
꼭 필요한 상황에서만 주고받을 수 있도록 해야합니다.

XSS 공격에는 HttpOnly 옵션을 넣은 쿠키를 통해 스크립트 실행은 방지할 수 있으나 CSRF에 대한 방어 메커니즘은 제공하지 않습니다. CSRF 토큰을 함께 사용하여 따로 방어쳬계를 구축해야합니다.

Statless의 단점으로 한번 발급한 토큰은 서버에서 관리하지 못하는 상태가 됩니다. 이로인해 탈취된 토큰을 무효화할 수 없으므로 이에대한 대책을 함께 생각해야합니다.
